# ALU

ALU가 계산을 하기 위해선 피연산자와 연산이 필요하다. 레지스터를 이용해 피연산자를 
받아드리고 제어장치로부터 제어 신호를 받아드림. 연산의 결과값은 우선 레지스터에 저장됨

## 플래그

ALU가 결과값의 상태를 위해 플래그를 같이 보냄

* 부호 플래그: 연산한 결과의 부호
* 제로 플래그: 연산 결과가 0인지
* 캐리 플래그: 올림이나 빌림이 발생했는지
* 오버플로우 플래그: 오버플로우 여부
* 인터럽트 플래그: 인터럽트가 가능한지
* 슈퍼바이저 플래: 커널 모드로 실행 중인지, 사용자 모드인지

플래그들은 플래그 레지스터에 저장된다

# 제어장치

제어 신호를 보내고 명령어를 해석하는 부품. 제어 신호는 전기 신호다

* 클럭 신호: 이산적으로 신호를 나눠 전송받는다
* 명렁어: 명령어 레지스터에서 명령어를 받아드리고 해석해서 방출
* 플래그: 플래그 받아서 제어 신호를 발생
* 시스템 버스: 그 중 제어 버스로 전달된 신호만 받음

# 레지스터


* 프로그램 카운터: 메모리에서 가져올 명령어의 주소, 즉 메모리에서 읽어 들일 명령어의 주소를 저장합니다.
명령어 포인터라고도 부름
* 명령어 레지스터: 메모리에서 읽어 들인 명령어를 저장하는 레지스터
* 메모리 주소 레지스터: 메모리 주소를 저장하는 레지스터
* 메모리 버퍼 레지스터: 메모리와 주고받을 값을 저장하는 레지스터
* 범용 레지스터: 다양하게 사용할 수 있는 레지스터, 데이터와 주소 모두 저장
* 플래그 레지스터: 연산 결과나 cpu 상태에 대한 부가적인 정보를 저장하는 레지스터

## 레지스터 주소 지정 방식

* 스택 주소 지정 방식: 스택 포인터란 스택의 꼭대기를 가리키는 레지스터, 메모리의 스택 영역의 주소를 가르킴
* 변위 주소 지정 방식: 오퍼랜드의 값과 특정 레지스터의 값을 더해 유효 주소를 얻어내는 방식
연산 코드, 레지스터, 오퍼랜드의 값이 동시에 저장됨
* 상대 주소 지정 방식: 변위 주소 지정 방식중 하나, 오퍼랜드와 프로그램 카운터를 더해 유효 주소 얻음
* 베이스 레지스터 주소 지정 방식: 변위 주소 지정 방식 중 하나, 오퍼랜드와 베이스 레지스터의 값을 더해 유효 주소 얻음


# 명령어 사이클
명령어들이 일정한 주기로 반복되며 실행되는데, 이 주기를 명령어 사이클이라고 함

* 인출 사이클(fetch): 메모리에 있는 명령어를 CPU로 가지고 오는 단계
* 실행 사이클(execution): 제어장치가 명령어 레지스터에 담긴 값을 해석하고 제어 신호를 발생

# 인터럽트

## 동기 인터럽트

CPU가 명령어들을 수행하다가 예상치 못한 상황에 마주쳤을 때, CPU가 실행하는 프로그램밍상의 오류와 같은
예외적인 상황 발생시 실행

## 비동기 인터럽트

입출력 장치에 의해 주로 발생함 하드웨어 인터럽트라고도 불림

1. 입출력장치가 CPU에 인터럽트 요청 신호를 보냄
2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인
3. 인터럽트 플래그를 통해 가능 여부 확인
4. 인터럽트 가능하면 CPU는 지금까지의 작업을 백업함
5. CPU는 인터럽트 벡터를 참조해 인터럽트 서비스 루틴을 실행합니다
6. 인터럽트 서비스 루틴 끝나면 백업한 작업을 복구하고 실행함

인터럽트는 벡터를 이용해 표시함

## 예외의 종류

예외가 발생하면 CPU는 하던 일을 중단하고 해당 예외를 처리한다. 

* 폴트: 예외를 처리한 직후 예외가 발생한 명령어부터 실행을 재개하는 예외
* 트랩: 예외를 처리한 직후 예외가 발생한 명령어의 다음 명령어부터 실행을 재개
* 중단: 실행 중인 프로그램을 강제로 중단시킬 수밖에 없는 심각한 오류를 발견했을시 강종

