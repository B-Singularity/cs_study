# 데이터와 명령어

## python virtual machine
python virtual machine에서 데이터와 명령어가 처리되는 순서는 다음과 같다

* 소스 코드 작성
* 파이썬 인터프리터가 파일을 바이트코드(.pyc)로 변환
* PVM이 바이트코드를 한 줄씩 실행
* PMV 내부적으로 스택 기반 가상 머신 방식으로 작동
* 각 바이트코드 명령어(예: LOAD_CONST, CALL_FUNCTION)는 실행 스택을 사용하여 연산 수행

PVM에서 데이터와 명령어 처리는 다음과 같이 이루어진다.

데이터 처리:
* 파이썬의 모든 데이터는 힙(heap) 메모리에 저장됨
* PVM은 데이터 객체를 참조하는 방식

명령어 처리:
* PVM은 바이트코드를 한 줄씩 가져와서 실행하는 인터프리터 방식 이용
* 명령어는 PVM의 실행 스택(operation stack)을 이용해 연산
* 예를 들어, a = 3 + 5 코드는 다음과 같은 바이트코드로 변환됨:

~~~python
LOAD_CONST 3
LOAD_CONST 5
BINARY_ADD
STORE_NAME a
~~~

## 운영체제 측면

* 운영체제는 파이썬 인터프리터를 실행하면 해당 프로세스를 CPU에서 실행하도록
스케줄링

* PVM이 바이트코드를 가져오면 CPU의 레지스터 또는 캐시에서 연산 후 결과를 메모리에 저장
* 운영체제는 코드 영역, 스택, 힙, 데이터 영역을 나누어 데이터를 관리

# CPU

## ALU
대부분의 ALU는 다음과 같은 연산을 할 수 있다

* 정수형 산술 연산(덧셈, 뺼셈, 곱셈, 나눗셈)
* 비트 논리 연산(AND, NOT, OR, XOR)
* 비트 시프트 연산

ALU의 일반적인 구조는 다음과 같다

* 입력, 출력 레지스터: 연산을 수행하기 위해 데이터를 저장해 입력, 출력

* 연산 선택기
* 산술 회로
* 논리 회로

ALU의 작동 방식은 다음과 같다

* 명령어 수신: 명령어에서 ALU가 수행할 연산과 데이터 추출
* 데이터 준비: ALU는 필요한 데이터를 레지스터에서 읽어옴
* 연산 수행
* 결과 저장: 출력 레지스터에 저장되며 필요시 메모리나 다른 레지스터로 전송

## 제어장치(Control Unit)

제어장치의 기능은 다음과 같다

* 명령어 해석: 메모리에서 가져온 명령어를 해석하여 작업 결정, 명령어의 opcode를 분석해 이루어짐
* 신호 생성: 연산의 시작, 종료, 데이터 전송을 제어
* 프로세서 스케줄링: 명령어의 실행 순서 결정
* 입출력 장치 관리: 외부 장치와의 데이터 전송을 관리

구조는 다음과 같다

* 명령어 레지스터(IR): 현재 실행 중인 명령어를 저장하는 레지스터, 제어장치가 해석
* 프로그램 카운터(PC): 다음 실행할 명령어 주소를 저장
* 제어 신호 생성기: 제어 신호를 생성
* 타이밍 및 동기화: 각 작업의 타이밍 조정

작동방식

* 명령어 페칭: CPU는 PC의 주소를 이용 명령어를 가져옴, IR에 저장
* 명령어 해석: IR에 저장된 명령어 해석 후 제어 신호 생성
* 신호 전송: ALU, 레지스터, 메모리 및 입출력 장치로 전송
* 다음 명령어 준비: PC가 다음 명령어 주소로 업데이트 됨

## 레지스터

CPU에서 데이터와 명령어를 임시로 저장하는 고속의 기억 장치, 처리 속도가 매우 빨라 데이터에 즉시 접근 가능

레지스터의 기능은 다음과 같다

* 임시 데이터 저장: 연산 중에 필요한 데이터를 임시 저장
* 주소 저장: 메모리 주소를 저장하여, 데이터 접근 시 사용, PC 레지스터
* 명령어 저장: 현재 실행 중인 명령어를 저장, IR 레지스터
* 상태 정보 저장: CPU의 상태 플래그, 조건 코드 등을 저장

레지스터의 종류

* 일반 목적: 연산에 필요한 데이터를 저장
* 특수 목적: 프로그램 카운터, 명령어 레지스터, 스택 포인터, 상태 레지스터
* 데이터 레지스터
* 주소 레지스터

레지스터의 구조

* 비트 단위 작은 저장소로 , 8비트, 16비트, 32비트, 64비트 중 하나로 구성

# 메모리

메모리의 기능은 다음과 같다

* 데이터 저장: 프로그램과 데이터를 저장, CPU가 필요할 때 접근할 수 있도록 함

* 빠른 접근: 메모리는 CPU가 데이터를 빠르게 읽고 쓸 수 있도록 설계

* 임시저장: 주로 임시 저장소로 이용됨

메모리의 종류

* 휘발성 메모리: RAM
* 비휘발성 메모리: ROM은 시스템 부팅에 필요한 펌웨어 저장

메모리의 구조

메모리는 기본적으로 셀로 구성됨

* 주소: 각 메모리 셀은 고유의 주소를 가지고 있다.
* 데이터: 메모리 셀에 저장되는 정보
* 버스: CPU와 메모리 간의 데이터 전송을 위한 경로

메모리의 작동 방식

* 데이터 요청: CPU가 메모리에 데이터를 요청, 메모리 주소가 전송됨
* 주소 해독: 요청된 주소를 해독하여 저장된 데이터를 찾음
* 데이터 전송: CPU에 데이터 전송
* 쓰기 작업: 해당 주소에 데이터를 저장하는 작업 수행

# 시스템 버스

시스템 버스의 기능은 다음과 같다

* 데이터 전송: 시스템 버스는 CPU, 메모리, 입출력 장치 간 데이터를 전송한다
* 주소 전송: 메모리 주소를 전송하여, CPU가 접근할 메모리 위치를 지정한다
* 제어 신호 전송: CPU에서 발생하는 제어 신호를 다른 장치에 전달한다.

시스템 버스의 구조

* 데이터 버스: 실제 데이터가 전송되는 경로이다. 데이터 버스의 폭(비트)은 동시에
전송할 수 있는 데이터의 양을 결정한다.
* 주소 버스: 메모리 주소를 전송하는 경로로 CPU가 메모리의 특정 위치에 접근할 수 있도록 한다
* 제어 버스: 제어 신호를 전송하는 경로로 CPU와 다른 장치 간의 통신을 조정

시스템 버스의 종류

* 확장 버스: 메인 시스템 버스 외 추가장치를 연결하기 위해 사용
* 내부 버스: CPU 내부에서 데이터 전송을 위해 사용되는 버스, ALU와 레지스터 간 데이터 전송
* 외부 버스: CPU와 외부 장치 간의 데이터 전송을 위해 사용







